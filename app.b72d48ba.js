parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"gslh":[function(require,module,exports) {
module.exports={type:"FeatureCollection",features:[{type:"Feature",properties:{id:"4f11ce82e4b07e9ecad0480c",date:20211207,country:"United States",cc:"US"},geometry:{type:"Point",coordinates:[-95.391,29.745]}},{type:"Feature",properties:{id:"4aca84e9f964a5203cc220e3",date:20181231,country:"United States",cc:"US"},geometry:{type:"Point",coordinates:[-95.401,29.717]}}]};
},{}],"P4Je":[function(require,module,exports) {
const e="#14B7F4",t=new mapboxgl.Map({container:"map",style:"mapbox://styles/cheeaun/ckbm8ln3w15d01ilp38k7xll8",maxZoom:16,logoPosition:"top-right",attributionControl:!1,boxZoom:!1,zoom:.1}),o=document.getElementById("info-countries"),n=document.getElementById("info-places"),c=document.getElementById("info-checkins"),i=document.getElementById("countries"),r=document.body.classList;function s(){r.add("interactive")}function a(){r.remove("interactive")}function l(){r.toggle("interactive")}t.on("dragstart",s),t.on("zoomstart",s),i.addEventListener("touchstart",a,!1),i.addEventListener("mouseenter",a),t.on("click",l);const d=e=>e>999?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):e;t.addControl(new mapboxgl.AttributionControl({compact:!0}),"top-right");class u{onAdd(e){const t=document.createElement("div");t.className="mapboxgl-ctrl mapboxgl-ctrl-group";const o=document.createElement("button");return o.innerHTML="<svg width='20' height='20' viewBox='0 0 24 24'>\n      <path d='M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.5-.07l-3.57 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07L4.93 15.5c.05.15.07.32.07.5 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.5.07l4.57-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56c-.05-.14-.07-.3-.07-.5 0-1.1.9-2 2-2s2 .9 2 2z'/>\n    </svg>",o.type="button",o.title="Show/hide journey lines",o.addEventListener("click",()=>{"visible"===e.getLayoutProperty("lines","visibility")?(e.setLayoutProperty("lines","visibility","none"),o.classList.remove("active")):(e.setLayoutProperty("lines","visibility","visible"),o.classList.add("active"))},!1),t.appendChild(o),t}}function p(e,t){const o=Math.ceil(t/60);let n=0;requestAnimationFrame(function c(){n>=t||((n+=o)>t&&(n=t),e.textContent=d(n),requestAnimationFrame(c))})}t.addControl(new u,"top-right"),t.addControl(new mapboxgl.NavigationControl,"top-right");const m=require("../data/checkins.min.json"),y={},g={},h=m.features.length,b=[];m.features=m.features.filter((e,t)=>{const{id:o,country:n}=e.properties,c=!g[o],[i,r]=e.geometry.coordinates;if(c){if(!y[n]){const t=e.properties.cc.toLowerCase();y[n]={cc:t,bounds:new mapboxgl.LngLatBounds,places_count:0,checkins_count:0}}y[n].bounds.extend([i,r]),y[n].places_count++,g[o]=!0}y[n].checkins_count++;const s=m.features[t+1];if(s&&e.properties.date===s.properties.date){let[e,t]=s.geometry.coordinates;e+=e-i>180?-360:i-e>180?360:0,b.push([[i,r],[e,t]])}return c});const f=Object.keys(g).length,v=Object.keys(y).map(e=>{const t=y[e];return{name:e,cc:t.cc,bounds:t.bounds,places_count:t.places_count,checkins_count:t.checkins_count}}),k=v.length;v.sort((e,t)=>t.places_count-e.places_count),t.once("styledata",()=>{t.once("load",()=>{v.forEach((e,o)=>{const{cc:n,name:c,bounds:r,checkins_count:s,places_count:a}=e,l=document.createElement("button");l.type="button",l.addEventListener("click",e=>{t.fitBounds(r,{padding:150})},!1),l.innerHTML=`\n        <img src="data/countries/${n}.svg" intrinsicsize="50x50" width="50" height="50" alt="">\n        <br>\n        <b>${c}</b>\n        <br>\n        ${d(s)} check-in${s>1?"s":""}\n        <br>\n        ${d(a)} place${a>1?"s":""}\n      `,i.appendChild(l)})});const s=t.getStyle().layers.reverse(),a=s.findIndex(function(e){return"symbol"!==e.type}),l=-1!==a?s[a].id:void 0;console.log(s),t.setLayerZoomRange("transit-label",14,16),t.addSource("checkins",{type:"geojson",data:m,cluster:!0,clusterMaxZoom:10,clusterRadius:10,tolerance:10,buffer:0}),t.addLayer({id:"cluster",type:"circle",source:"checkins",filter:["has","point_count"],paint:{"circle-radius":["interpolate",["linear"],["get","point_count"],3,7,10,10,100,13,200,16],"circle-color":e,"circle-opacity":.9,"circle-stroke-width":["interpolate",["linear"],["get","point_count"],3,3,50,6],"circle-stroke-color":e,"circle-stroke-opacity":.3}}),t.addLayer({id:"checkins-count",type:"symbol",source:"checkins",filter:["has","point_count"],maxzoom:11,layout:{"text-field":"{point_count_abbreviated}","text-size":10}}),t.addLayer({id:"checkins",type:"circle",source:"checkins",minzoom:8,filter:["!has","point_count"],paint:{"circle-radius":3,"circle-color":e,"circle-opacity":.9,"circle-stroke-width":3,"circle-stroke-color":e,"circle-stroke-opacity":.1}},l),t.once("load",()=>{requestAnimationFrame(()=>{p(c,h),p(n,f),p(o,k),r.add("render")})}),t.on("mouseenter","cluster",()=>{t.getCanvas().style.cursor="pointer"}),t.on("click","cluster",e=>{e.originalEvent.stopPropagation(),t.flyTo({center:e.lngLat,zoom:t.getZoom()+2})}),t.on("mouseleave","cluster",()=>{t.getCanvas().style.cursor=""}),t.addLayer({id:"lines",type:"line",source:{type:"geojson",data:{type:"Feature",geometry:{type:"MultiLineString",coordinates:b}}},layout:{visibility:"none"},paint:{"line-color":"#fff","line-opacity":.3}},l);const u=e=>{confirm("Oops, the map is acting weird now. Reload this page? ðŸ˜…")&&location.reload(),console.error(e)};t.on("error",u),window.onerror=u});
},{"../data/checkins.min.json":"gslh"}]},{},["P4Je"], null)
//# sourceMappingURL=/app.b72d48ba.js.map